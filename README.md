# yasukari
yasukari公式ホームページリニューアル

## 変更履歴

### v1.1
- Next.js による初期構築
- トップページのUI/UX設計・開発
- BikeModelCarousel コンポーネント追加
- Footer コンポーネント追加
- グローバルスタイルとアニメーションを導入

### v1.2
- ChatBotWidget 追加でどのページからでもチャットを起動可能に
- ManualページにCalendarWidgetとDirectoryTreeを表示
- ホーム画面をモダンなレイアウトへ刷新
- 商品一覧ページ(仮)を追加
- スタイル調整とリファクタリング

### v1.3
- サイト更新ブログ（システム開発専用）に10件ずつのページネーションを実装
- DirectoryTreeを折りたたみ式にし各ファイルへのリンクを追加
- ソース閲覧用ページ `/source/*` を追加しテキスト表示に対応

### v1.4
- 簡易的なログイン機能を追加
- `/login` ページと `/api/login` API でユーザー認証を実装

### v1.5
- 新着情報ページ `/news` と 店舗ブログ `/customer_blog` を追加
- ホームにヒーロー画像スライダーを導入
- ヘルプページ `/help` を追加しナビゲーションからアクセス可能に
- 排気量などで絞り込めるジャンル別ページ `/t/genre/*` を追加
- 店舗一覧 `/stores` を掲載し料金 `/pricing`、保険説明 `/insurance` を新設
- ご利用案内 `/guide` と お問い合わせ `/contact` を整備
- 会社概要や外部送信規律、特商法、利用規約、プライバシーポリシーなど法定ページを追加


## manual_for_system
サイトの更新情報や運用マニュアルをMarkdown形式で記録するディレクトリです。`/manual_for_system` 配下の `.md` ファイルはサイト上でも閲覧できます。

## 各ファイルの役割

- `components/BikeModelCarousel.tsx`  
  トップページなどでバイクの人気モデルを横スクロール表示するカルーセルコンポーネント。型定義したBikeItem配列を受け取り、画像とモデル名、バッジをカード形式で表示します。Swiperライブラリを使いスマホではスワイプ操作可能。リンク遷移やタイトル変更にも対応し、220pxの画像を統一、セクションに余白と影を付けたデザインです。初期表示ではフェードイン効果を設定でき、ユーザーに注目してもらいやすいUIです。
- `components/ChatBot.tsx`  
  FAQデータを基にカテゴリ選択と質問応答を行うReactコンポーネント。useStateで会話履歴とステップを管理し、回答が見つからない場合は自由入力モードに移行します。Tailwind CSSでUIを調整し、吹き出し形式で履歴をスクロール表示。将来のOpenAI連携を想定した仮の返答を返し、シンプルなカードUIでスマホ対応。チャット部分は独立して再利用も容易です。
- `components/DirectoryTree.tsx`
  ディレクトリの構造をリスト形式で表示するコンポーネント。manual_for_systemページのサイドバーで利用します。
- `components/CalendarWidget.tsx`
  現在月のカレンダーを表示する小さなウィジェットです。
- `components/ChatBotWidget.tsx`
  画面右下に固定表示されるボタンからChatBotを開閉するウィジェットです。

- `components/Footer.tsx`  
  ページ下部に配置するフッターコンポーネント。ブランド説明文、サイトポリシーやサービス案内、SNSリンクを3カラムで整え、ロゴとコピーライトも表示します。Tailwind CSSのグリッドとLink、react-iconsを利用してレスポンシブ対応。薄グレーの背景と区切り線でページの締めを演出し、各項目は余白を活かしスマホでは縦並びに変化します。紹介文の下に問い合わせリンクを置き、ブランドの安心感を伝えます。
- `pages/index.tsx`  
  サイトのホーム画面を構成するファイル。ヘッダーに検索バーとナビゲーションを配置し、ブログカードやジャンル別アイテム、人気モデルカルーセルを順に表示します。Swiperとアニメーションで動きをつけ、BikeModelCarouselやFooterコンポーネントを活用。利用者が求める情報に素早く到達できるよう設計された入口ページです。トップバーには今週限定キャンペーンを知らせるテキストを配置し、サイトの活気を演出します。
- `pages/chat.tsx`
  チャットサポート専用のページ。Headでタイトルを設定し、メイン領域ではChatBotを画面中央に表示します。薄いグレーの背景と見出しの下に、縦長で最大幅を制限したチャットウィンドウを配置し、スマホでも利用しやすいレイアウトにしました。履歴保存や認証連携を見据えつつ、独自スタイルの追加も行いやすい作りです。
- `pages/_app.tsx`  
  Next.js全体に適用される共通設定をまとめるファイル。グローバルCSSをここで読み込み、AppPropsから受け取ったComponentをそのままレンダリングするだけのシンプルな処理です。レイアウトや状態管理を追加する拡張ポイントとして機能し、コードの重複を防ぐ基盤となります。将来的にページ間の共通レイアウトやコンテキストを導入する際は、このファイルに処理を追加します。
- `pages/_document.tsx`  
  HTMLのテンプレートを定義するNext.jsのDocumentファイル。Headでは外部のアイコンフォントやスタイルシート、アニメーションライブラリを読み込み、body内でMainとNextScriptを配置します。ここで追加したリンクやスクリプトは全ページに一括適用され、SEO対策や外部ツール設定をまとめて管理するのに便利です。アプリ全体の共通HTML構造を担う重要なファイルで、他の設定もここで統一します。
- `pages/products/index.tsx`
  全てのバイク機種を一覧表示するためのページ。現在は準備中のメッセージのみ表示します。

- `pages/manual_for_system/index.tsx`
  サイト更新ブログ（システム開発専用）の一覧を生成するファイル。manual_for_systemディレクトリ内のMarkdownを読み込み、日付順に並べ替えて一覧ページを静的生成します。タイトルや抜粋を取得し、リンクをクリックすると詳細ページへ遷移。シンプルなカードデザインで更新日と要約を表示し、サイトの運用状況を把握できます。getStaticPropsを活用することでビルド時にデータを取り込み、表示速度が速い点も特徴です。
- `pages/manual_for_system/[slug].tsx`  
  MarkdownファイルをHTMLに変換して表示する個別記事ページ。getStaticPathsでパスを生成し、getStaticPropsで内容を読み込みrenderMarkdown関数でタグに変換します。各記事は静的にビルドされ、ロードが速くSEOにも有利。コンテンツの更新時は再ビルドするだけで反映されます。表示はシンプルなプロース拡張クラスを使い、スタイルを保ちながら安全にHTMLを埋め込んでいます。
- `styles/global.css`  
  全体の配色やフォントを定めるグローバルCSS。:rootにカラーバリエーションを設定し、テキスト、リンク、ボタン、カードなどの共通デザインを定義しています。余白やホバーアニメーションも組み込み、_app.tsxで読み込むことで全ページにスタイルを適用。今後の追加ページでも基本となるスタイル群です。カード内画像の幅やボタンの丸みまで統一し、デザインの再利用性を高めます。今後のブランドカラー変更にも対応可能です。
- `data/faq.json`  
  チャットボットで利用するFAQデータをJSON形式で管理。カテゴリごとにid、title、qaの配列を保持し、ChatBotコンポーネントから読み込まれて各質問の回答を返すための基礎情報となります。現在は静的ファイルとして簡易テスト用に置かれていますが、管理画面を用意すれば動的更新も可能な設計です。質問内容や回答文を増やすことでチャットボットの精度向上にもつながります。
- `lib/getDirTree.ts`
  指定パスからディレクトリ階層を取得するユーティリティ。DirectoryTreeコンポーネントから呼び出されます。
- `manual_for_system/2025-06-30-site-update.md`  
  サイトの更新履歴を記録したMarkdownファイル。2025年6月30日時点の開発状況として、Next.js初期構築やトップページのカルーセル実装などを説明しています。Markdown形式のため履歴の閲覧や管理が容易で、プロジェクト初期の方針を振り返る資料としても役立ちます。今後の開発予定を追記していくことで進捗を追うドキュメントとしても利用され、履歴の共有でチーム全体の認識を統一します。
- `manual_for_system/2025-06-30-chatbot-design.md`  
  チャットボット機能の設計メモをまとめたMarkdown。FAQカテゴリのボタン表示から自由入力へ遷移する流れやOpenAI API連携予定などを記述しています。試験実装時の注意点やデータファイルの配置場所も記録し、ブログ記事として公開することで社内外への進捗共有を兼ねます。開発意図を簡潔にメモして方針のブレを防ぐ役割を担い、今後のチャット機能拡張時に参照する基礎資料として残しています。
- `next.config.js`  
  Next.jsの動作設定を記述するファイル。現状はreactStrictModeをfalseにした最小構成のみですが、今後画像ドメインの許可や環境変数の定義など、ビルドやランタイムの挙動を細かく調整する際に利用します。設定内容はGitで共有され、チーム全体で同じ環境を再現できます。プロジェクト拡張時にはここを編集することで動作を柔軟に変更でき、運用上の設定を一元管理できます。設定更新は再ビルドで即反映。
- `next-env.d.ts`  
  TypeScript用の宣言ファイルで、Next.jsが生成する型定義をまとめています。CSSモジュールの型やNext.js特有のグローバル型を含み、エディタの補完精度を高めます。通常は自動更新されますが、新しいファイル形式を追加した際は追記することで型エラーを防げます。プロジェクトの設定次第ではカスタムモジュール宣言も追記でき、型安全な開発を支える裏方的な存在です。変更時は再起動が必要です。
- `package.json`  
  プロジェクト管理に使用する設定ファイル。Next.jsやReact、Swiper、react-iconsなど依存ライブラリのバージョンを記述し、npm scriptsとしてdev・build・startコマンドを登録しています。プライベートフラグによりnpm公開はされず、今後依存追加やバージョン更新を行う際はここを編集しチームの環境を統一します。設定内容はGitで管理されているため、全員が同じ環境で作業できます。
- `tsconfig.json`  
  TypeScriptのコンパイル設定をまとめるファイル。ES2017ターゲットやモジュール解決方法、jsx設定などを定義し、strictモードは無効化。Next.js推奨のオプションをベースにインクリメンタルビルドやJSONモジュール読み込みを有効にしています。include/excludeを指定してnode_modulesを除外し、開発効率とビルド速度を向上させます。設定変更で型チェック厳格化も可能。
## AWS連携例
ログイン機能を本番運用する場合、Amazon Cognito を使って認証やユーザープールを管理することができます。EC2 上のアプリから Cognito を利用すれば、パスワードリセットや多要素認証なども簡単に設定できます。
